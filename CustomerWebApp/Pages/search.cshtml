@page
@model CustomerWebApp.Pages.searchModel
@{
    ViewData["Title"] = "Search for a Room";
}

<h2>Search for a Room</h2>

<form method="post">
    <div class="form-group">
        <label>Room Size (Number of Beds)</label>
        <input asp-for="RoomSize" type="number" class="form-control" min="1" />
    </div>

    <div class="form-group">
        <label>Room Type</label>
        <select asp-for="RoomType" class="form-control">
            <option value="">-- Select Room Type --</option>
            <option>Single</option>
            <option>Double</option>
            <option>Suite</option>
        </select>
    </div>

    <div class="form-group">
        <label>Start Date</label>
        <input asp-for="StartDate" type="date" class="form-control" />
    </div>

    <div class="form-group">
        <label>End Date</label>
        <input asp-for="EndDate" type="date" class="form-control" />
    </div>

    <br />
    <button type="submit" class="btn btn-primary">Search</button>
</form>

@if (Model.SearchResults != null)
{
    <h3 class="mt-4">Available Rooms:</h3>
    @if (Model.SearchResults.Any())
    {
        <ul>
            @foreach (var room in Model.SearchResults)
            {
                var rT = @Model.GetRoomType(room.RoomType);
                <li> Type: @rT, Size: @room.RoomSize beds <a href="/booking?roomType=@room.RoomType&roomSize=@room.RoomSize">Book</a></li>
            }
        </ul>
    }
    else
    {
        <p>No rooms found matching your criteria.</p>
    }
}
